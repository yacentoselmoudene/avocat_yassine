{# FILE: templates/avocat/notification_detail.html #}
{% extends 'generic/detail.html' %}

{% block title %}تفاصيل التبليغ{% endblock %}
{% block page_title %}تفاصيل التبليغ{% endblock %}

{% block breadcrumbs %}
  <li class="breadcrumb-item"><a href="/">الرئيسية</a></li>
  <li class="breadcrumb-item"><a href="{% url 'cabinet:notification_list' %}">التبليغات</a></li>
  <li class="breadcrumb-item active" aria-current="page">تفاصيل</li>
{% endblock %}

{% block header_actions %}
  <a class="btn btn-primary" href="#"
     data-bs-toggle="modal" data-bs-target="#mainModal"
     hx-get="{% url 'cabinet:notification_update' object.pk %}" hx-target="#modalBody">
    <i class="bi bi-pencil ms-1"></i> تعديل
  </a>
  <a class="btn btn-outline-secondary" href="{% url 'cabinet:notification_list' %}">
    <i class="bi bi-arrow-counterclockwise ms-1"></i> رجوع
  </a>
{% endblock %}

{% block detail_body %}
  <dl class="row mb-0">
    <dt class="col-sm-4 text-secondary">الحكم</dt>
    <dd class="col-sm-8">
      <a href="{% url 'cabinet:decision_detail' object.decision.pk %}">{{ object.decision.numero_decision }}</a>
    </dd>

    <dt class="col-sm-4 text-secondary">رقم طلب التبليغ</dt>
    <dd class="col-sm-8">{{ object.demande_numero }}</dd>

    <dt class="col-sm-4 text-secondary">تاريخ إيداع الطلب</dt>
    <dd class="col-sm-8">{{ object.date_depot_demande|date:"Y-m-d" }}</dd>

    <dt class="col-sm-4 text-secondary">رقم ملف التبليغ</dt>
    <dd class="col-sm-8">{{ object.dossier_notification_numero|default:"--" }}</dd>

    <dt class="col-sm-4 text-secondary">المفوض القضائي</dt>
    <dd class="col-sm-8">{{ object.huissier_nom|default:"--" }}</dd>

    <dt class="col-sm-4 text-secondary">تاريخ التسليم للمفوض</dt>
    <dd class="col-sm-8">{{ object.date_remise_huissier|date:"Y-m-d"|default:"--" }}</dd>

    <dt class="col-sm-4 text-secondary">تاريخ التبليغ</dt>
    <dd class="col-sm-8">{{ object.date_signification|date:"Y-m-d"|default:"--" }}</dd>

    <dt class="col-sm-4 text-secondary">ملف الإثبات</dt>
    <dd class="col-sm-8">
      {% if object.preuve %}
        <a href="#" class="btn btn-sm btn-outline-info me-1" data-bs-toggle="modal" data-bs-target="#mainModal"
           hx-get="{% url 'cabinet:document_viewer' %}?model=notification&pk={{ object.pk }}" hx-target="#modalBody">
          <i class="bi bi-eye ms-1"></i> معاينة
        </a>
        <a href="{{ object.preuve.url }}" class="btn btn-sm btn-outline-success" target="_blank">
          <i class="bi bi-download ms-1"></i> تحميل
        </a>
      {% else %}
        <span class="text-muted">--</span>
      {% endif %}
    </dd>
  </dl>
{% endblock %}

{% block detail_actions %}
  <a class="btn btn-sm btn-outline-primary w-100 mb-2" href="#"
     data-bs-toggle="modal" data-bs-target="#mainModal"
     hx-get="{% url 'cabinet:notification_update' object.pk %}" hx-target="#modalBody">
    <i class="bi bi-pencil ms-1"></i> تعديل
  </a>
  <a class="btn btn-sm btn-outline-danger w-100 mb-2" href="#"
     data-bs-toggle="modal" data-bs-target="#mainModal"
     hx-get="{% url 'cabinet:notification_delete' object.pk %}" hx-target="#modalBody">
    <i class="bi bi-trash ms-1"></i> حذف
  </a>
  <a class="btn btn-sm btn-outline-secondary w-100" href="{% url 'cabinet:notification_list' %}">
    <i class="bi bi-list-ul ms-1"></i> العودة للقائمة
  </a>
{% endblock %}
